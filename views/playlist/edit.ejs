<!-- New Route -- GET
earfull/playlists/:userId/new

Create Route -- POST 
earfull/playlists/:userId

Edit Route -- GET 
earfull/playlists/:userId/:playlistId/edit 

Update Route -- PUT 
earfull/playlists/:userId/:playlistId

Destroy Route -- DELETE 
earfull/playlists/:userId/:playlistId

Show Route -- GET 
earfull/playlists/:userId 

render: {
	user: foundUser,
	playlist: foundPlaylist,
	message: req.session.message,
	title: "Edit Playlist",
	header: `Edit Playlist ${foundPlaylist.name}`,
	loggedIn: req.session.loggedIn
}

const playlistSchema = mongoose.Schema({
	name: {type: String, require: true, unique: true}
	ownerId: String,
	datePosted: {type: Date, default: Date.now()},
	lastEdited: {type: Date, default: Date.now()},
	episodes: [String] // array of strings of episode IDs!!
});

-->
<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" integrity="sha256-p6xU9YulB7E2Ic62/PX+h59ayb3PBJ0WFTEQxq0EjHw=" crossorigin="anonymous" />
	<link rel="stylesheet" type="text/css" href="/static/style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
	<title><%=title%></title>
</head>
<body>
<!-- Partial for header, requires variables "header" (string) and "loggedIn" (boolean) -->
	<%- include("../partials/header", {header: header}) %>

	<br />
	<br />
	<br />
	<br />
	<br />
	<br />

	<h3><%=playlist.name%></h3>
	<form action="/earfull/playlists/<%=user._id%>/<%=playlist._id%>?_method=PUT" method="POST">
		<input type="text" name="name" value="<%=playlist.name%>"><br />
		<input type="text" name="episode" placeholder="Episode"><br />
		<button>Update Playlist</button>
	</form>
	<form action="/earfull/playlists/<%=user._id%>/<%=playlist._id%>?_method=DELETE" method="POST">
		<button>Delete Playlist</button>
	</form>
	<ol id="sortable" class="playlist episodeDisplay">
		<% for (let i = 0; i < playlist.episodes.length; i++) { -%>
			<div id="<%=i%>">
				<li class="default"><button class="remove" id="<%=i%>-remove">X</button><span id="episode-name-<%=i%>">
				<%=playlist.episodes[i]%></span>
				</li>
			</div>
		<% } -%>
	</ol>
	<br />
	
	<button id="save-btn">Save Changes</button>	
	
	<!-- add hidden attribute to form or ol when done -->
	<form>
		<ol id="hidden-episode-list"> 
			<% for (var i = 0; i < playlist.episodes.length; i++) { -%>
				<li><input name="<%=i%>" value="<%=playlist.episodes[i]%>"></li>	
			<% } -%>
		</ol>
	</form>
<!-- Partial for footer -->
	<%- include("../partials/footer") %>

<!-- Our script, stored in public/static  -->
	<script type="text/javascript" src="/static/playlistDisplay.js"></script>
</body>
</html>